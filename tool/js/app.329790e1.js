(function(e){function t(t){for(var s,i,a=t[0],l=t[1],c=t[2],p=0,d=[];p<a.length;p++)i=a[p],o[i]&&d.push(o[i][0]),o[i]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);u&&u(t);while(d.length)d.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],s=!0,a=1;a<n.length;a++){var l=n[a];0!==o[l]&&(s=!1)}s&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var s={},o={app:0},r=[];function i(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=s,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var u=l;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var s=n("64a9"),o=n.n(s);o.a},"13f1":function(e,t,n){},"1dc2":function(e,t,n){"use strict";var s=n("13f1"),o=n.n(s);o.a},"3d5a":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var s=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("b-container",{attrs:{fluid:""}},[n("b-row",[n("b-col",[n("b-row",[n("b-col",[n("b-form-file",{attrs:{state:Boolean(e.file),placeholder:"Choose a file...","drop-placeholder":"Drop file here..."},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1),n("b-col",[n("b-button",{attrs:{block:"",href:"#",variant:"success"},on:{click:e.saveFile}},[e._v("Save")])],1)],1),n("draggable",{attrs:{group:"scenes","ghost-class":"ghost"},on:{start:function(t){e.drag=!0},end:function(t){e.drag=!1}},model:{value:e.scenes,callback:function(t){e.scenes=t},expression:"scenes"}},e._l(e.scenes,function(t,s){return n("GameScene",{key:s,attrs:{scene:t,sceneIDs:e.sceneIDs},on:{deleteScene:function(t){return e.deleteScene(s)}}})}),1),n("b-button",{attrs:{block:"",href:"#",variant:"info"},on:{click:e.addScene}},[e._v("Add Scene")])],1),n("b-col",[n("b-row",[n("b-col",[n("b-form-file",{attrs:{state:Boolean(e.resource_file),placeholder:"Choose a file...","drop-placeholder":"Drop file here..."},model:{value:e.resource_file,callback:function(t){e.resource_file=t},expression:"resource_file"}})],1),n("b-col",[n("b-button",{attrs:{block:"",href:"#",variant:"success"},on:{click:e.saveResourceFile}},[e._v("Save")])],1)],1),n("b-row",e._l(e.resources,function(t,s){return n("b-card",{key:s,staticClass:"mt-3"},[n("b-col",[n("b-input-group",{staticClass:"mt-3"},[n("b-input-group-text",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("Path")]),n("b-input-group-text",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("/www/assets/")]),n("b-form-select",{staticClass:"bg-light",attrs:{slot:"prepend",options:e.assetOptions,plain:!0},slot:"prepend",model:{value:t.folder,callback:function(n){e.$set(t,"folder",n)},expression:"resource.folder"}}),n("b-form-input",{model:{value:t.url,callback:function(n){e.$set(t,"url",n)},expression:"resource.url"}})],1)],1),n("b-col",[n("b-input-group",{staticClass:"mt-3"},[n("b-input-group-text",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("ID")]),n("b-form-input",{attrs:{placeholder:"If left blank, the file name will default"},model:{value:t.key,callback:function(n){e.$set(t,"key",n)},expression:"resource.key"}})],1)],1)],1)}),1),n("b-button",{staticClass:"mt-3",attrs:{block:"",href:"#",variant:"info"},on:{click:e.addResource}},[e._v("Add Resource")])],1)],1)],1)],1)},r=[],i=(n("6762"),n("2fdb"),n("7f7f"),n("28a5"),n("ac6a"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"scene"},[n("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[n("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"accordion-"+e.scene.id,expression:"'accordion-' + scene.id"}],attrs:{block:"",href:"#",variant:"secondary"}},[e._v(e._s(e.scene.id))])],1),n("b-collapse",{attrs:{id:"accordion-"+e.scene.id,accordion:"scene-accordion",role:"tabpanel"}},[n("b-card-body",[n("b-input-group",{staticClass:"mt-3"},[n("b-input-group-text",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("Scene ID")]),n("b-form-input",{attrs:{id:"speaker",required:""},model:{value:e.scene.id,callback:function(t){e.$set(e.scene,"id",t)},expression:"scene.id"}})],1),n("b-input-group",{staticClass:"mt-3"},[n("b-input-group-text",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("Setting")]),n("b-form-input",{attrs:{id:"speaker",required:""},model:{value:e.scene.setting,callback:function(t){e.$set(e.scene,"setting",t)},expression:"scene.setting"}})],1),n("br"),n("draggable",{attrs:{group:"scenes","ghost-class":"ghost"},on:{start:function(t){e.drag=!0},end:function(t){e.drag=!1}},model:{value:e.scene.lines,callback:function(t){e.$set(e.scene,"lines",t)},expression:"scene.lines"}},e._l(e.scene.lines,function(t,s){return n("GameLine",{key:s,attrs:{obj:t,sceneIDs:e.sceneIDs,currentSceneID:e.scene.id,index:s},on:{deleteLine:function(t){return e.deleteLine(s)}}})}),1),n("b-row",[n("b-col",[n("b-button",{attrs:{block:"",href:"#",variant:"info"},on:{click:e.addLine}},[e._v("Add Line")])],1),n("b-col",[n("b-button",{attrs:{block:"",href:"#",variant:"danger"},on:{click:e.deleteScene}},[e._v("Delete Scene")])],1)],1)],1)],1)],1)],1)}),a=[],l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dialogue"},[n("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[n("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"accordion-"+e.lineID,expression:"'accordion-' + lineID"}],attrs:{block:"",href:"#",variant:"secondary"}},[e._v(e._s(e.shortText))])],1),n("b-collapse",{attrs:{id:"accordion-"+e.lineID,accordion:"line-accordion",role:"tabpanel"}},[n("b-card-body",[n("b-input-group",{staticClass:"mt-3"},[n("b-input-group-text",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("Line Type")]),n("b-form-select",{staticClass:"bg-light",attrs:{slot:"append",options:e.lineOptions,plain:!0},slot:"append",model:{value:e.obj.type,callback:function(t){e.$set(e.obj,"type",t)},expression:"obj.type"}})],1),"dialogue"===e.obj.type?n("div",[n("b-input-group",{staticClass:"mt-3"},[n("b-input-group-text",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("Speaker")]),n("b-form-input",{attrs:{id:"speaker",required:""},model:{value:e.obj.source,callback:function(t){e.$set(e.obj,"source",t)},expression:"obj.source"}}),n("b-form-select",{staticClass:"bg-light",attrs:{slot:"append",options:e.visibleOptions,plain:!0},slot:"append",model:{value:e.obj.source_visible,callback:function(t){e.$set(e.obj,"source_visible",t)},expression:"obj.source_visible"}})],1),n("b-input-group",{staticClass:"mt-3"},[n("b-input-group-text",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("Expression")]),n("b-form-input",{attrs:{id:"expression"},model:{value:e.obj.source_expression,callback:function(t){e.$set(e.obj,"source_expression",t)},expression:"obj.source_expression"}})],1),n("b-form-textarea",{staticClass:"mt-3",attrs:{id:"textarea",placeholder:"Text...",rows:"6","max-rows":"6"},model:{value:e.obj.text,callback:function(t){e.$set(e.obj,"text",t)},expression:"obj.text"}}),n("br")],1):"narration"===e.obj.type?n("div",[n("b-input-group",{staticClass:"mt-3"},[n("b-input-group-text",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("Clear Last Speaker")]),n("b-form-select",{staticClass:"bg-light",attrs:{slot:"append",options:e.yesnoOptions,plain:!0},slot:"append",model:{value:e.obj.source_visible,callback:function(t){e.$set(e.obj,"source_visible",t)},expression:"obj.source_visible"}})],1),n("b-form-textarea",{staticClass:"mt-3",attrs:{id:"textarea",placeholder:"Text...",rows:"6","max-rows":"6"},model:{value:e.obj.text,callback:function(t){e.$set(e.obj,"text",t)},expression:"obj.text"}}),n("br")],1):"destination"===e.obj.type?n("div",[n("b-input-group",{staticClass:"mt-3"},[n("b-input-group-text",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("Destination")]),n("b-form-select",{staticClass:"bg-light",attrs:{slot:"append",options:e.sceneOptions,plain:!0},slot:"append",model:{value:e.obj.destination,callback:function(t){e.$set(e.obj,"destination",t)},expression:"obj.destination"}})],1),n("br")],1):"choice"===e.obj.type?n("div",[e._l(e.obj.choices,function(t,s){return n("div",{key:s,staticClass:"choice"},[n("b-input-group",{staticClass:"mt-3"},[n("b-input-group-text",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("Choice")]),n("b-form-input",{attrs:{required:""},model:{value:t.text,callback:function(n){e.$set(t,"text",n)},expression:"choice.text"}})],1),n("b-input-group",{staticClass:"mt-3"},[n("b-input-group-text",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("Destination")]),n("b-form-select",{staticClass:"bg-light",attrs:{slot:"append",options:e.sceneBlankOptions,plain:!0},slot:"append",model:{value:t.destination,callback:function(n){e.$set(t,"destination",n)},expression:"choice.destination"}})],1)],1)}),n("b-button",{staticClass:"mt-3",attrs:{block:"",href:"#",variant:"info"},on:{click:e.addChoice}},[e._v("Add Choice")])],2):e._e(),n("b-button",{staticClass:"mt-3",attrs:{block:"",href:"#",variant:"danger"},on:{click:e.deleteLine}},[e._v("Delete Line")])],1)],1)],1)],1)},c=[],u=n("75fc"),p=(n("c5f6"),{name:"Line",props:{obj:Object,sceneIDs:Array,currentSceneID:String,index:Number},methods:{deleteLine:function(){this.$emit("deleteLine")},addChoice:function(){this.obj.choices.push({choice:null,destination:""})}},computed:{shortText:function(){if(this.obj.destination)return"".concat(this.obj.type," : ").concat(this.obj.destination);if(this.obj.choices)return"choices";if(!this.obj.text)return"new Line";var e=this.obj.text.substr(0,30);return 30===e.length?"".concat(this.obj.type," : ").concat(e,"..."):"".concat(this.obj.type," : ").concat(e)},lineID:function(){return this.currentSceneID+"-"+this.index},visibleOptions:function(){return[{text:"Visible",value:!0},{text:"Not Visible",value:!1}]},yesnoOptions:function(){return[{text:"Yes",value:!0},{text:"No",value:!1}]},lineOptions:function(){return[{text:"dialogue",value:"dialogue"},{text:"Narration",value:"narration"},{text:"Destination",value:"destination"},{text:"Choice",value:"choice"}]},sceneOptions:function(){var e=this;return this.sceneIDs.filter(function(t){return t!==e.currentSceneID}).map(function(e){return{text:e,value:e}})},sceneBlankOptions:function(){var e=this;return[""].concat(Object(u["a"])(this.sceneIDs)).filter(function(t){return t!==e.currentSceneID}).map(function(e){return{text:e,value:e}})}}}),d=p,b=(n("1dc2"),n("2877")),f=Object(b["a"])(d,l,c,!1,null,"05b9cc15",null),v=f.exports,h=n("1980"),m=n.n(h),g={name:"GameScene",components:{draggable:m.a,GameLine:v},props:{scene:Object,sceneIDs:Array},methods:{addLine:function(){this.scene.lines.push({type:"dialogue",source:null,source_visible:!1,source_expression:null,text:null})},deleteLine:function(e){this.scene.lines.splice(e,1)},deleteScene:function(){this.$emit("deleteScene")}}},x=g,j=(n("9077"),Object(b["a"])(x,i,a,!1,null,"5b9e2e46",null)),_=j.exports,k={name:"app",components:{draggable:m.a,GameScene:_},data:function(){return{file:null,resource_file:null,resources:[{folder:"images",url:null,key:null}],scenes:[{id:"root",lines:[],setting:null}]}},watch:{file:function(){this.processFile(this.file)},resource_file:function(){this.processResourceFile(this.resource_file)}},methods:{addScene:function(){this.scenes.push({id:null,lines:[],setting:null})},addResource:function(){this.resources.push({folder:"images",url:null,key:null})},processFile:function(e){var t=this,n=new FileReader;n.onload=function(){return function(e){t.scenes=JSON.parse(e.target.result)}}(),n.readAsText(e)},processResourceFile:function(e){var t=this,n=new FileReader;n.onload=function(){return function(e){t.resources=JSON.parse(e.target.result).dataKey.files,t.resources.forEach(function(e){var t=e.url.split("/");e.folder=t.shift(),e.url=t.join("/")})}}(),n.readAsText(e)},saveFile:function(){var e=this.file.name||"new_file.json";window.downloadFile(e,JSON.stringify(this.scenes,null,2),"text/json")},saveResourceFile:function(){var e=this.resource_file.name||"new_resource.json",t=JSON.parse(JSON.stringify(this.resources));t.forEach(function(e){if(!e.key&&e.url){var t=e.url.split("/");e.key=t[t.length-1].split(".")[0].toLowerCase()}e.url=e.folder+"/"+e.url,e.url.includes(".json")?e.type="json":e.url.includes(".png")&&(e.type="image"),delete e.folder}),window.downloadFile(e,JSON.stringify({dataKey:{path:"/www/assets/",files:t}},null,2),"text/json")},deleteScene:function(e){this.scenes.splice(e,1)}},computed:{sceneIDs:function(){return this.scenes.map(function(e){return e.id})},assetOptions:function(){return[{text:"images/",value:"images"},{text:"json/",value:"json"},{text:"script/",value:"script"}]}}},y=k,w=(n("034f"),Object(b["a"])(y,o,r,!1,null,null,null)),C=w.exports,S=n("9f7b"),O=n.n(S);n("f9e3"),n("2dd8");s["default"].config.productionTip=!1,s["default"].use(O.a),new s["default"]({render:function(e){return e(C)}}).$mount("#app"),window.downloadFile=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text/plain",s=document.createElement("a");s.setAttribute("href","data:".concat(n,";charset=utf-8,").concat(encodeURIComponent(t))),s.setAttribute("download",e),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)}},"64a9":function(e,t,n){},9077:function(e,t,n){"use strict";var s=n("3d5a"),o=n.n(s);o.a}});
//# sourceMappingURL=app.329790e1.js.map